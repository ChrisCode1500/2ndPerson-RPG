[gd_scene load_steps=19 format=3 uid="uid://bsflnvy5krdh6"]

[ext_resource type="Script" path="res://player.gd" id="1_chkq1"]
[ext_resource type="Script" path="res://CamRoot.gd" id="2_5275h"]
[ext_resource type="Resource" uid="uid://b2td1561ccpoj" path="res://Movements/stand.tres" id="2_h8qsp"]
[ext_resource type="Resource" uid="uid://wmqmxex734c7" path="res://Movements/walk.tres" id="3_2tpk6"]
[ext_resource type="Resource" uid="uid://5y7dkv4t3gb3" path="res://Movements/run.tres" id="4_02cjq"]
[ext_resource type="Resource" uid="uid://h5t1wybfwika" path="res://Movements/sprint.tres" id="5_2rcp2"]
[ext_resource type="Script" path="res://Movement_controller.gd" id="6_r5n5c"]
[ext_resource type="Script" path="res://Animation__controller.gd" id="7_77rk5"]
[ext_resource type="PackedScene" uid="uid://c14app66mqu8m" path="res://Assets/BETTERTESTCHARACTERSTILLIGNORE.glb" id="7_xchd5"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_sn6y7"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y02h5"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gh6im"]
animation = &"Walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lgimv"]
animation = &"SPRINT"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sku3r"]
animation = &"SPRINT"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_kukkx"]
blend_point_0/node = SubResource("AnimationNodeAnimation_y02h5")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_gh6im")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_lgimv")
blend_point_2/pos = 2.0
blend_point_3/node = SubResource("AnimationNodeAnimation_sku3r")
blend_point_3/pos = 3.0
min_space = 0.0
max_space = 3.0
snap = 1.0

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_xyx4j"]
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_sn6y7")
nodes/TimeScale/position = Vector2(420, 80)
nodes/movement_state/node = SubResource("AnimationNodeBlendSpace1D_kukkx")
nodes/movement_state/position = Vector2(180, 80)
nodes/output/position = Vector2(700, 140)
node_connections = [&"TimeScale", 0, &"movement_state", &"output", 0, &"TimeScale"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hspt3"]

[sub_resource type="SphereShape3D" id="SphereShape3D_5v081"]
radius = 0.7

[node name="player" type="CharacterBody3D"]
script = ExtResource("1_chkq1")
movement_states = {
"run": ExtResource("4_02cjq"),
"sprint": ExtResource("5_2rcp2"),
"stand": ExtResource("2_h8qsp"),
"walk": ExtResource("3_2tpk6")
}

[node name="Movement_controller" type="Node" parent="." node_paths=PackedStringArray("player", "model_root")]
script = ExtResource("6_r5n5c")
player = NodePath("..")
model_root = NodePath("../ModelRoot")

[node name="Animation__controller" type="Node" parent="." node_paths=PackedStringArray("animation_tree", "player")]
script = ExtResource("7_77rk5")
animation_tree = NodePath("../ModelRoot/AnimationTree")
player = NodePath("..")

[node name="ModelRoot" type="Node3D" parent="."]
transform = Transform3D(1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, -1, 0)

[node name="BETTERTESTCHARACTERSTILLIGNORE" parent="ModelRoot" instance=ExtResource("7_xchd5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00531897, 0, -3.71933e-05)

[node name="Skeleton3D" parent="ModelRoot/BETTERTESTCHARACTERSTILLIGNORE/Armature" index="0"]
bones/0/position = Vector3(0.159279, -0.0815993, -97.1393)
bones/0/rotation = Quaternion(-0.748316, -0.0272147, 0.00199339, 0.662781)
bones/1/rotation = Quaternion(0.0379643, 0.0303013, 0.013577, 0.998727)
bones/2/rotation = Quaternion(0.0847297, 0.00473676, 0.00107517, 0.996392)
bones/3/rotation = Quaternion(0.141893, 0.00479191, 0.000690495, 0.98987)
bones/4/rotation = Quaternion(0.0839178, -0.0145518, -0.00150246, 0.996365)
bones/5/rotation = Quaternion(0.139081, -0.0296607, 0.0282131, 0.989435)
bones/7/rotation = Quaternion(-0.559331, -0.417664, 0.594954, -0.398416)
bones/8/position = Vector3(-1.82646e-06, 12.9223, -9.12308e-06)
bones/8/rotation = Quaternion(0.447471, 0.0545598, 0.218101, 0.865578)
bones/9/position = Vector3(5.23248e-07, 27.4047, 2.82475e-06)
bones/9/rotation = Quaternion(5.79346e-07, -1.82565e-07, 0.168684, 0.98567)
bones/10/position = Vector3(-2.54933e-06, 27.6145, 3.43781e-07)
bones/10/rotation = Quaternion(0.0397081, 0.0323545, -0.0223358, 0.998438)
bones/11/rotation = Quaternion(0.0449364, 0.195369, 0.202532, 0.958537)
bones/12/position = Vector3(3.59247e-07, 4.74499, 1.5424e-05)
bones/12/rotation = Quaternion(0.120882, 0.0284118, -0.0650107, 0.990128)
bones/13/position = Vector3(3.09193e-06, 4.38213, 5.7376e-06)
bones/13/rotation = Quaternion(-0.0485019, -0.0547985, -0.201268, 0.976799)
bones/14/position = Vector3(-5.37669e-06, 3.45907, -6.69282e-07)
bones/15/position = Vector3(-2.82204, 12.2666, 0.231822)
bones/15/rotation = Quaternion(0.155449, -0.00228816, -0.0324049, 0.98731)
bones/16/position = Vector3(3.32982e-07, 3.89196, 4.44965e-06)
bones/16/rotation = Quaternion(0.264995, 0.00028761, -0.0287363, 0.963821)
bones/17/position = Vector3(1.03534e-06, 3.41516, 8.94976e-06)
bones/17/rotation = Quaternion(0.313168, 0.000366198, -0.0336556, 0.949101)
bones/18/position = Vector3(-5.07605e-07, 3.07799, 7.79904e-07)
bones/19/position = Vector3(-1.28245e-05, 12.7755, -5.80915e-06)
bones/19/rotation = Quaternion(0.169674, -0.000596831, -0.0603049, 0.983653)
bones/20/position = Vector3(1.32317e-07, 3.61396, -5.96606e-07)
bones/20/rotation = Quaternion(0.278428, 0.000348181, -0.0306065, 0.959969)
bones/21/rotation = Quaternion(0.362053, 0.000529731, -0.0391363, 0.931335)
bones/23/rotation = Quaternion(0.157159, 0.00118499, -0.0659115, 0.985371)
bones/24/position = Vector3(-6.40506e-08, 3.60118, -1.563e-06)
bones/24/rotation = Quaternion(0.450493, 0.000928258, -0.0493238, 0.891416)
bones/25/position = Vector3(2.01077e-06, 3.30733, 3.77092e-06)
bones/25/rotation = Quaternion(0.338314, 0.000497782, -0.0369052, 0.940309)
bones/26/position = Vector3(-2.35017e-05, 3.66012, 1.94677e-05)
bones/27/position = Vector3(4.72584, 10.9082, 0.226132)
bones/27/rotation = Quaternion(0.241736, -0.00074597, -0.0515535, 0.968971)
bones/28/position = Vector3(-6.64864e-07, 4.13666, 4.24919e-06)
bones/28/rotation = Quaternion(0.330263, 0.00403197, -0.0308042, 0.943378)
bones/29/position = Vector3(1.26128e-06, 2.59482, -1.99418e-06)
bones/29/rotation = Quaternion(0.36483, 0.000543455, -0.0395885, 0.930232)
bones/30/position = Vector3(1.75908e-06, 2.92387, 1.04901e-06)
bones/31/rotation = Quaternion(0.568252, -0.404709, 0.615183, 0.367219)
bones/32/position = Vector3(1.61447e-06, 12.9223, -1.09893e-05)
bones/32/rotation = Quaternion(0.424965, 0.0199243, -0.198209, 0.883018)
bones/33/position = Vector3(6.48767e-07, 27.4047, 6.3386e-06)
bones/33/rotation = Quaternion(8.44707e-08, 1.08107e-07, -0.0847974, 0.996398)
bones/34/position = Vector3(1.52326e-05, 27.6145, 2.04815e-05)
bones/34/rotation = Quaternion(-0.00841434, -0.0293991, -0.0356289, 0.998897)
bones/35/rotation = Quaternion(0.121815, 0.0634336, -0.234003, 0.962486)
bones/36/position = Vector3(3.47804e-06, 4.74498, -1.27875e-05)
bones/36/rotation = Quaternion(0.0749418, 0.00755211, 0.228246, 0.970686)
bones/37/position = Vector3(-3.08227e-06, 4.38213, -4.1818e-06)
bones/37/rotation = Quaternion(-0.0467041, 0.00560994, 0.186881, 0.981256)
bones/38/position = Vector3(1.36526e-05, 3.45906, -2.83199e-05)
bones/39/rotation = Quaternion(0.192091, 0.00372685, -0.013195, 0.981281)
bones/40/rotation = Quaternion(0.326113, -0.000993975, 0.0310411, 0.94482)
bones/41/position = Vector3(-1.14463e-06, 3.41515, 9.74571e-07)
bones/41/rotation = Quaternion(0.347813, -0.00109656, 0.0327847, 0.93699)
bones/42/position = Vector3(9.06945e-07, 3.07798, 2.41369e-06)
bones/43/position = Vector3(1.63053e-05, 12.7755, 8.09735e-06)
bones/43/rotation = Quaternion(0.210499, 0.00568878, 0.00301095, 0.977573)
bones/44/rotation = Quaternion(0.383987, -0.00123118, 0.0354698, 0.922656)
bones/45/rotation = Quaternion(0.325053, -0.00102559, 0.0306611, 0.945198)
bones/46/position = Vector3(2.77201e-05, 3.68019, 7.21433e-06)
bones/47/position = Vector3(-2.21663, 12.147, -0.00998567)
bones/47/rotation = Quaternion(0.190524, 0.00324466, 0.0269477, 0.981307)
bones/48/position = Vector3(5.58727e-07, 3.6012, 3.8485e-07)
bones/48/rotation = Quaternion(0.436834, -0.00147598, 0.0397115, 0.898664)
bones/49/rotation = Quaternion(0.298941, -0.000901037, 0.0285887, 0.953843)
bones/51/position = Vector3(-4.72583, 10.9082, 0.226134)
bones/51/rotation = Quaternion(0.184226, 0.10617, 0.0705897, 0.97458)
bones/52/rotation = Quaternion(0.386282, -0.0012992, 0.0359813, 0.921678)
bones/53/position = Vector3(1.15099e-07, 2.59484, 1.54608e-06)
bones/53/rotation = Quaternion(0.330313, -0.00102512, 0.0314919, 0.943345)
bones/54/position = Vector3(6.31125e-07, 2.92388, -9.1743e-06)
bones/55/rotation = Quaternion(0.0784738, 0.0867837, 0.990841, -0.0674085)
bones/56/rotation = Quaternion(-0.283034, 0.0654507, 0.0282737, 0.956456)
bones/57/rotation = Quaternion(0.585539, 0.0217088, -0.00599055, 0.810331)
bones/58/rotation = Quaternion(0.238727, -0.0398964, -0.0169125, 0.97012)
bones/60/rotation = Quaternion(-0.0518182, 0.0688961, 0.996265, 0.00492002)
bones/61/rotation = Quaternion(-0.218577, -0.0818677, -0.0073304, 0.972352)
bones/62/rotation = Quaternion(0.604222, -0.0574222, -0.00346372, 0.794737)
bones/63/rotation = Quaternion(0.227425, 0.0355935, 0.0160986, 0.973012)

[node name="AnimationTree" type="AnimationTree" parent="ModelRoot"]
root_node = NodePath("../BETTERTESTCHARACTERSTILLIGNORE")
tree_root = SubResource("AnimationNodeBlendTree_xyx4j")
anim_player = NodePath("../BETTERTESTCHARACTERSTILLIGNORE/AnimationPlayer")
parameters/TimeScale/scale = 1.0
parameters/movement_state/blend_position = 0.15991

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_hspt3")

[node name="CamRoot" type="Node3D" parent="."]
script = ExtResource("2_5275h")

[node name="CamYaw" type="Node3D" parent="CamRoot"]

[node name="CamPitch" type="Node3D" parent="CamRoot/CamYaw"]

[node name="SpringArm3D" type="SpringArm3D" parent="CamRoot/CamYaw/CamPitch"]
shape = SubResource("SphereShape3D_5v081")
spring_length = 2.5

[node name="Camera3D" type="Camera3D" parent="CamRoot/CamYaw/CamPitch/SpringArm3D"]
h_offset = 1.0
v_offset = 0.5

[connection signal="set_movement_direction" from="." to="Movement_controller" method="_on_set_movement_direction"]
[connection signal="set_movement_state" from="." to="Movement_controller" method="_on_set_movement_state"]
[connection signal="set_movement_state" from="." to="Animation__controller" method="_on_set_movement_state"]
[connection signal="set_cam_rotation" from="CamRoot" to="Movement_controller" method="_on_set_cam_rotation"]

[editable path="ModelRoot/BETTERTESTCHARACTERSTILLIGNORE"]
